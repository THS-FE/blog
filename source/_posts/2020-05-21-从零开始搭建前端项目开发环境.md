---
title: ä»é›¶å¼€å§‹æ­å»ºå‰ç«¯é¡¹ç›®å¼€å‘ç¯å¢ƒ
author: å¤©ä¸‹å¸ƒæ­¦
authorLink: https://github.com/zapzqc
excerpt: å®ä¾‹è®²è§£å¦‚ä½•é€šè¿‡ Webpack5 + TypeScript + SASS + Babel 7 + ESLint 7 + stylelint 13 + commitlint 12 æ­å»ºå‰ç«¯å¼€å‘ç¯å¢ƒ
cover: 2020/05/21/ä»é›¶å¼€å§‹æ­å»ºå‰ç«¯é¡¹ç›®å¼€å‘ç¯å¢ƒ/cover.jpg
thumbnail: 2020/05/21/ä»é›¶å¼€å§‹æ­å»ºå‰ç«¯é¡¹ç›®å¼€å‘ç¯å¢ƒ/cover.jpg
categories:
  - - åŸºç¡€å»ºè®¾
    - é¡¹ç›®æ­å»º
tags:
  - webpack
  - ESLint
  - Babel
  - Browserslist
toc: true
date: 2020-05-21 09:29:34
sticky: 100
---

# 1 å†™åœ¨æœ€å‰

ä¸ºä½•å¤§å¤šæ•°äººè§‰å¾—æ­å»ºä¸€ä¸ªå‰ç«¯é¡¹ç›®çš„å¼€å‘ç¯å¢ƒå¾ˆå›°éš¾ã€‚é¦–å…ˆï¼Œä¸€ä¸ªå®Œæ•´çš„å¼€å‘ç¯å¢ƒéœ€è¦ä¾èµ–å¤šä¸ªå·¥å…·ï¼Œæ¯ä¸ªå·¥å…·åˆæœ‰ä¸è®¡å…¶æ•°çš„é…ç½®é¡¹ï¼Œæƒ³è¦å…¨éƒ¨ç†è§£éœ€è¦èŠ±è´¹å¤§é‡çš„æ—¶é—´ã€‚å…¶æ¬¡ï¼Œä¸€äº›å®˜æ–¹æ–‡æ¡£ä¸­æ–‡ç¿»è¯‘æ»åï¼Œè€Œä¸”ç»“æ„ç»„ç»‡çš„ä¹Ÿä¸æ˜¯å¾ˆå¥½ï¼Œæ²¡æœ‰ä»ä¸€ä¸ªå…·ä½“çš„é¡¹ç›®å‡ºå‘è®²è§£å¦‚ä½•é…ç½®ï¼Œåªçœ‹ API æ²¡æœ‰ä»€ä¹ˆé’ˆå¯¹æ€§ã€‚æœ€åï¼Œå¥½å¤šå›½å†…ç›¸å…³åšå®¢è¦ä¹ˆæ²¡æœ‰æ ‡æ³¨å·¥å…·çš„ç‰ˆæœ¬ï¼Œå¯¼è‡´æŒ‰ç…§æ­¥éª¤è¿›è¡Œé…ç½®æ—¶ä¼šå‘ç°è‡ªå·±ä¸‹è½½çš„å’Œè®²è¿°çš„æŸäº›åœ°æ–¹ä¼šä¸ä¸€è‡´ï¼›è¦ä¹ˆåªè®²å¦‚ä½•é…ç½®ï¼Œä¸è®²é…ç½®çš„åŸå› ï¼Œå¯¼è‡´å¤§å®¶ä»æ˜¯äº‘é‡Œé›¾é‡Œã€‚ä¸è¿‡æ‰€å¹¸ï¼Œå¤§éƒ¨åˆ† CLI å®ç°äº†è„šæ‰‹æ¶çš„åŠŸèƒ½ï¼Œå¸®åŠ©å¿«é€Ÿç”Ÿæˆé¡¹ç›®ï¼Œè€Œä¸ç”¨äº†è§£å·¥å…·çš„å…·ä½“é…ç½®ã€‚

ä½†æ˜¯ï¼Œä½œæ–‡é‡Œæ€»ä¼šæœ‰ä¸ªè½¬æŠ˜ä¸æ˜¯ã€‚å½“æˆ‘ä»¬éœ€è¦è‡ªå·±ç‹¬ç«‹å»åˆ›å»ºä¸€ä¸ªé¡¹ç›®çš„æ—¶å€™...è¯¥æ€ä¹ˆåŠå“–ï¼ŒDon't be afraidï¼ŒI'm here.

æ¥ä¸‹æ¥ä¼šå…ˆä»‹ç»ä¸€ä¸‹å‡ ä¸ªå¸¸ç”¨å·¥å…·ï¼ˆBabel 7.13.0ï¼ŒBrowserslist 4.16.6, ESLint 7.26.0, EditorConfigï¼‰çš„æ ¸å¿ƒæ¦‚å¿µã€å®‰è£…å’Œé…ç½®ï¼Œæœ€åä¼šç»“åˆ TypeScript + SASS + webpack5 çš„é¡¹ç›®æ¥è¯´å¦‚ä½•å°†å®ƒä»¬æ•´åˆèµ·æ¥å½¢æˆä¸€ä¸ªå®Œæ•´çš„å‰ç«¯é¡¹ç›®å¼€å‘ç¯å¢ƒã€‚ Here we go.

# 2 [Babel](https://babeljs.io/) (7.13.0)

Babel æ˜¯ä¸€ä¸ª Javascript ç¼–è¯‘å™¨ã€‚**ä¸»è¦ç”¨äºå°† ECMAScript 2015+ ç‰ˆæœ¬çš„ä»£ç è½¬æ¢ä¸ºå‘åå…¼å®¹(backwards compatible)çš„ JavaScript è¯­æ³•ï¼Œä»¥ä¾¿èƒ½å¤Ÿè¿è¡Œåœ¨å½“å‰å’Œæ—§ç‰ˆæœ¬çš„æµè§ˆå™¨æˆ–å…¶å®ƒç¯å¢ƒ(å¦‚ï¼šnode)ä¸­ã€‚**

## 2.1 [å®‰è£…](https://babeljs.io/docs/en/usage)

```bash
npm i -D @babel/core @babel/cli @babel/preset-env

npm i -D core-js
```

è¿è¡Œæ­¤å‘½ä»¤ä¹‹å‰è¦å…ˆåˆå§‹åŒ–é¡¹ç›®ï¼Œæ–°å»ºé¡¹ç›®æ–‡ä»¶å¤¹ xxx , åœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹ è¿è¡Œï¼š

```bash
 npm init
```

å°½é‡ä¸è¦ä¸€è·¯å›è½¦ï¼Œå»ºè®®æŒ‰å®é™…å†…å®¹æ¥ã€‚

### 2.1.1 [@babel/core](https://babeljs.io/docs/en/babel-core/)

ä¸»è¦ç”¨äºå°†æºä»£ç (JS\\TS)è§£æä¸º AST(æŠ½è±¡è¯­æ³•æ ‘)ã€‚

### 2.1.2 [@babel/cli](https://babeljs.io/docs/en/babel-cli/)

ç”¨äºä»å‘½ä»¤è¡Œç¼–è¯‘æ–‡ä»¶ã€‚

### 2.1.3 [@babel/preset-env](https://babeljs.io/docs/en/babel-preset-env)

é¢„è®¾ç¯å¢ƒã€‚æºä»£ç è§£ææˆ AST åï¼Œè¿˜éœ€è¦è¿›è¡Œè½¬æ¢å’Œç”Ÿæˆï¼Œè¿™æ˜¯ç”±æ’ä»¶æ¥åšçš„ã€‚@babel/preset-env(é¢„è®¾ç¯å¢ƒ)æ˜¯å¸¸ç”¨é¢„è®¾å’Œæ’ä»¶çš„é›†åˆï¼ˆbabel-preset-es2015ï¼Œbabel-preset-es2016ï¼Œbabel-preset-es2017ï¼Œbabel-preset-latestï¼Œbabel-preset-node5, babel-preset-es2015-node ç­‰ï¼Œ@babel/preset-env ä¸æ”¯æŒ stage-x æ’ä»¶ï¼‰ã€‚

æœ€åˆæ¯å¹´ EcmaScript æ ‡å‡†æ›´æ–°ï¼Œéƒ½éœ€è¦ä½¿ç”¨è€…æ‰‹åŠ¨æ·»åŠ æœ€æ–°å¹´ä»½çš„é¢„è®¾æ‰èƒ½è¿›è¡Œæ–°è¯­æ³•çš„è½¬æ¢:

```text
 "presets": [
    "es2015",
    "es2016",
    "es2017"
  ],
```

åæ¥æ”¹æˆäº† babel-preset-latestï¼Œæ„æ€ä¸ºæœ€æ–°çš„é¢„è®¾ï¼ˆåŒ…å«äº†ä»¥å¾€æ‰€æœ‰å¹´ä»½ï¼‰ï¼Œä¸ç”¨æ¯å¹´éƒ½éœ€è¦æ‰‹åŠ¨æ·»åŠ ä¸€æŠŠã€‚æœ€ç»ˆ latest ä¹Ÿè¢«åºŸå¼ƒï¼Œå˜æˆäº†ç›®å‰çš„ preset-envã€‚å¼€å‘äººå‘˜å¯ä»¥åœ¨ä»£ç ä¸­ç›´æ¥ä¹¦å†™å·²ç»æ­£å¼å‘å¸ƒçš„ç‰¹æ€§ã€‚ä¸è¿‡ï¼Œå½“ ES æ›´æ–°æ—¶ï¼Œè‚¯å®šè¿˜éœ€è¦æ›´æ–°ä¸€ä¸‹ @babel/preset-envã€‚

### 2.1.4 [core-js](https://github.com/zloirock/core-js)

Babel é»˜è®¤åªè½¬æ¢æ–°çš„ JavaScript è¯­æ³•ï¼Œå¦‚ï¼š ç±»ã€ç®­å¤´å‡½æ•°ã€æ‰©å±•è¿ç®—ï¼ˆspreadï¼‰ï¼Œè€Œä¸è½¬æ¢æ–°çš„ API ï¼Œå¦‚ï¼šIteratorã€Generatorã€Setã€Mapsã€Proxyã€Reflectã€Symbolã€Promise ç­‰å…¨å±€å¯¹è±¡ï¼Œä»¥åŠä¸€äº›å®šä¹‰åœ¨å…¨å±€å¯¹è±¡ä¸Šçš„æ–¹æ³•ï¼ˆå¦‚ï¼šObject.assignï¼‰ã€‚ä¸è½¬ç çš„ API è¯¦ç»†æ¸…å•å¯ä»¥æŸ¥çœ‹ [definitions.js](https://github.com/babel/babel/blob/master/packages/babel-plugin-transform-runtime/src/runtime-corejs3-definitions.js) æ–‡ä»¶ã€‚

core-js æä¾›äº† es5ã€es6+çš„ polyfills(å¡«å……ç‰©ï¼Œ**ç”¨äºå®ç°æµè§ˆå™¨å¹¶ä¸æ”¯æŒçš„åŸç”Ÿ API çš„ä»£ç ï¼Œå®ƒå°†ä¸€ä¸ªæ–°çš„ API å¼•å…¥åˆ°ä¸€ä¸ªæ—§çš„ç¯å¢ƒä¸­ï¼Œä»…é æ—§ç¯å¢ƒä¸­å·²æœ‰çš„æŠ€æœ¯æ‰‹æ®µå®ç°**)ï¼ŒåŒ…æ‹¬[promises](https://github.com/zloirock/core-js#ecmascript-promise), [symbols](https://github.com/zloirock/core-js#ecmascript-symbol), [collections](https://github.com/zloirock/core-js#ecmascript-collections), iterators, [typed arrays](https://github.com/zloirock/core-js#ecmascript-typed-arrays)ç­‰ç­‰ã€‚

è¿™é‡Œä¸å¾—ä¸æä¸€ä¸‹è¯¥åº“å’Œå®ƒçš„ä¿„ç½—æ–¯ä½œè€…ã€‚è¯¥åº“ä¸€å‘¨çš„ä¸‹è½½é‡æ¯”å¤§å®¶ç†ŸçŸ¥çš„ Angularã€ Reactã€Vue åŠ ä¸€èµ·çš„ä¸‹è½½é‡è¿˜è¦å¤šçš„å¤šã€‚å°±è¿™æ ·çš„ä¸€ä¸ªåº“è°èƒ½æƒ³åˆ°å®ƒçš„ä½œè€…ç«Ÿç„¶éœ€è¦åœ¨å‘½ä»¤è¡Œé‡Œ looking for a good jobï¼Œåæ¥è¯¥ä½œè€…åˆå› ä¸ºéª‘æ‘©æ‰˜è½¦æ’æ­»ä¸€äººï¼Œä¼¤ä¸€äººï¼Œè¢«åˆ¤å…¥ç‹± 18 ä¸ªæœˆ, ç°åœ¨åº”è¯¥å·²ç»å¤„äºæœåˆ‘æœŸé—´äº†...

@babel/polyfill å·²åºŸå¼ƒã€‚

## 2.2 [é…ç½®](https://babeljs.io/docs/en/configuration)

å¯ä»¥åœ¨ä¸‰ç±»æ–‡ä»¶ä¸­å¯¹ Babel è¿›è¡Œé…ç½®ï¼Œåœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸­åˆ›å»º babel.config.\*ã€.babelrc.\* (\* å¯ä¸º ç©ºï¼Œjson, js, cjs æˆ– mjs) ï¼Œæˆ–åœ¨ package.json ä¸­æ·»åŠ ã€‚

å¦‚æœæ‰©å±•åä¸º jsonï¼Œé‚£ä¸€èˆ¬çš„å†…å®¹æ˜¯ï¼š

```text
{
  "presets": [...],
  "plugins": [...]
}
```

å¦‚æœæ‰©å±•åä¸º jsï¼Œåˆ™å†…å®¹ä¸ºï¼š

```js
const presets = [ ... ];
const plugins = [ ... ];

module.exports = { presets, plugins };
```

åœ¨ package.json ä¸­ï¼š

```text
{
  "name": "my-package",
  "version": "1.0.0",

  "babel": {
    "presets": [ ... ],
    "plugins": [ ... ],
  }
}
```

**æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨ babel.config.js ä½œä¸ºé…ç½®æ–‡ä»¶ï¼Œå› ä¸ºåœ¨ JS ä¸­å¯ä»¥å†™æ³¨é‡Šï¼Œæ–¹ä¾¿ç†è§£ï¼ˆJSON ä¸æ–¹ä¾¿ï¼‰ã€‚å…¶å®ƒå·¥å…·çš„é…ç½®æ–‡ä»¶èƒ½é‡‡ç”¨ js åšæ‰©å±•åçš„ä¹Ÿå°½é‡ä½¿ç”¨ .jsã€‚**

åœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹åˆ›å»º src ç›®å½•ï¼Œæ–°å»º index.jsã€‚ç¼–å†™å†…å®¹ï¼š

```js
const userInfo = new Map();
userInfo.set('name', 'å¤©ä¸‹å¸ƒæ­¦');
userInfo.set('age', 18);

console.log(Object.entries(userInfo));
```

åœ¨ package.json ä¸­æ·»åŠ ï¼š

```text
  "scripts": {
    "build": "./node_modules/.bin/babel src/index.js --out-dir dist"
  },
```

### 2.2.1 [@babel/preset-env](https://babeljs.io/docs/en/babel-preset-env)

æœ€ç®€è®¾ç½®å¦‚ä¸‹(ä¸å»ºè®®ï¼Œè½¬æ¢åä¼šå¤šå‡ºå¾ˆå¤šå†—ä½™ä»£ç ï¼Œè‡³å°‘è¦é…ç½®ä¸€ä¸ª targets)ï¼š

```js
module.exports = {
  presets: [['@babel/preset-env']],
};
```

åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œï¼š

```bash
npm run build
```

å°±èƒ½åœ¨æ–°ç”Ÿæˆçš„ dist æ–‡ä»¶å¤¹ä¸­çœ‹åˆ° ç¼–è¯‘åçš„ index.js ï¼š

{% asset_img noconst.jpg %}

å¯ä»¥çœ‹åˆ°ä¹‹å‰çš„ const è¢«è½¬è¯‘æˆäº† varã€‚

ä¸‹é¢å¯¹ä¸¤ä¸ªå¸¸ç”¨å‚æ•°è¿›è¡Œè¯´æ˜ï¼š

#### 2.2.1.1 targets

è®¾ç½®ç¼–è¯‘ä»£ç çš„ç›®æ ‡å¹³å°ï¼Œå¯ä»¥æ˜¯æµè§ˆå™¨ä¹Ÿå¯ä»¥æ˜¯ node ç¯å¢ƒã€‚**å¦‚ä¸è®¾ç½®ï¼Œä¼šå°†æ‰€æœ‰ ES6+çš„ä»£ç ç¼–è¯‘ä¸º ES5-ã€‚å»ºè®®è®¾ç½®ï¼Œè¿™æ ·å¯ä»¥æŒ‰ç›®æ ‡å¹³å°æ¥å†³å®šæ˜¯å¦è¿›è¡Œè½¬æ¢ï¼Œä»¥é¿å…å¢åŠ ä¸å¿…è¦çš„è¡¥ä¸ï¼Œå‡å°‘æ‰“åŒ…åçš„ä»£ç ä½“ç§¯**ã€‚

å¸¸è§è®¾ç½®å¦‚ä¸‹ï¼š

```js
module.exports = {
  presets: [
    [
      '@babel/preset-env',
      {
        targets: '> 1%, last 2 versions, ie > 8',
      },
    ],
  ],
};
```

ä»¥ä¸Šé…ç½®çš„æ„æ€æ˜¯è¦å…¼å®¹å…¨çƒèŒƒå›´å†…ä½¿ç”¨é‡å¤§äº 1%çš„æµè§ˆå™¨å’Œå®ƒä»¬æœ€æ–°çš„ä¸¤ä¸ªç‰ˆæœ¬ï¼ŒåŠ ä¸Š IE 9-11ã€‚è¿™é‡Œæ—¢å¯ä»¥æŒ‡å®šæµè§ˆå™¨çš„ç‰ˆæœ¬ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æŸ¥è¯¢çš„æ–¹å¼æ¥ç¡®å®šè¦æ”¯æŒçš„æµè§ˆå™¨ã€‚è¯¦æƒ…è§[Browserslist](#Browserslist-4-11-1)è¿™ä¸€ç« èŠ‚ã€‚

è‹¥è®¾ç½® targets: '> 10%' , å†è¿è¡Œä¸€æ¬¡ npm run build ï¼Œå› ä¸ºå¤§äº 10% çš„æµè§ˆå™¨åªæœ‰è°·æ­Œï¼Œå®ƒæ˜¯æ”¯æŒ const çš„, å› æ­¤ç¼–è¯‘ç»“æœå‡ ä¹åŸå°æœªåŠ¨ï¼š

{% asset_img const.jpg %}

**å»ºè®®ä½¿ç”¨ .browserslistrc æ–‡ä»¶æ¥å®šä¹‰ targetsï¼Œè¿™æ ·å…¶å®ƒå·¥å…·(Autoprefixerã€PostCSSã€Stylelint ç­‰)ä¹Ÿèƒ½é€šè¿‡è¯¥é…ç½®è·å–åˆ°ç›®æ ‡æµè§ˆå™¨ï¼Œä»è€Œåšæœ‰é’ˆå¯¹æ€§çš„å¤„ç†ã€‚**

#### 2.2.1.2 useBuiltIns

æ˜¯å¦å†…ç½®å…¼å®¹ã€‚å¦‚æœè®¾ç½®ï¼Œå°±å¯ä»¥ä¸ç”¨åœ¨ HTML ä¸­å¼•å…¥ polyfill çš„ JS æ–‡ä»¶æ¥å¤„ç†æµè§ˆå™¨çš„å…¼å®¹æ€§é—®é¢˜äº†ã€‚å¸¸è§è®¾ç½®å¦‚ä¸‹ï¼š

```js
module.exports = {
  presets: [
    [
      '@babel/preset-env',
      {
        useBuiltIns: 'usage',
        corejs: 3,
      },
    ],
  ],
};
```

å¯é€‰å€¼åŒ…æ‹¬ï¼š"usage" | "entry" | falseã€‚

- falseï¼šé»˜è®¤å€¼ï¼Œå³ä¸å¼•å…¥ polyfillsï¼Œä¸åšæµè§ˆå™¨å…¼å®¹ã€‚

- entryï¼šæ ¹æ®é…ç½®çš„æµè§ˆå™¨ï¼Œå¼•å…¥è¿™äº›æµè§ˆå™¨ä¸å…¼å®¹çš„ polyfillã€‚è¿™ä¸ªæ˜¯åœ¨æ–‡ä»¶ä¸­å·²ç»æ˜ç¡®å†™äº† import "core-js" æˆ–å…¶ä¸­å…·ä½“æŸä¸ªæ¨¡å—ï¼ˆå¦‚ï¼šimport "core-js/es/array"ï¼‰çš„æƒ…å†µä¸‹ï¼Œbabel ä¼šæ ¹æ® browserslist è‡ªåŠ¨æ·»åŠ æŒ‡å®šæµè§ˆå™¨ä¸å…¼å®¹çš„è¯¥æ¨¡å—ä¸‹çš„æ‰€æœ‰ polyfillï¼Œæ— è®ºå½“å‰ä»£ç æ˜¯å¦éœ€è¦ã€‚

- usageï¼š**ä¼šæ ¹æ®é…ç½®çš„æµè§ˆå™¨ä»¥åŠä»£ç ä¸­ç”¨åˆ°çš„ API è‡ªåŠ¨æ·»åŠ  polyfillï¼Œå®ç°äº†æŒ‰éœ€å¼•å…¥ã€‚ä¸€èˆ¬ä½¿ç”¨è¿™ä¸ªé…ç½®ã€‚**

åªæœ‰å½“ useBuiltIns çš„å€¼ä¸º entry æˆ– usage æ—¶ï¼Œ"corejs" è¿™ä¸ªé€‰é¡¹æ‰ä¼šèµ·ä½œç”¨ã€‚è¿™é‡Œå¦‚æ— ç‰¹æ®Šæƒ…å†µå°½é‡æŒ‡å®š core-js çš„ç‰ˆæœ¬ä¸º 3ï¼ˆé»˜è®¤ä¸º 2ï¼‰, å› ä¸ºå®ƒæœ‰å¾ˆå¤š 2 æ²¡æœ‰çš„æ–°ç‰¹æ€§ï¼š "corejs": 3ã€‚

è¿™é‡Œè¿è¡Œ npm run build, è¿è¡Œç»“æœä¸ºï¼š

{% asset_img builtin.jpg %}

å¯ä»¥çœ‹å‡ºå®ƒåœ¨å…¨å±€ä½œç”¨åŸŸä¸‹æ·»åŠ äº† Map å˜é‡ï¼ŒåŒæ—¶åœ¨ Object åŸå‹ä¸­æ·»åŠ äº† entries æ–¹æ³•ã€‚

**babel é»˜è®¤è½¬å‡ºçš„æ˜¯æ¨¡å—è§„èŒƒä¸º commonJSï¼Œåªèƒ½åœ¨ Node ç¯å¢ƒä¸­ä½¿ç”¨ï¼Œå¦‚æœæƒ³åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ä½¿ç”¨ï¼Œä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼ï¼š**
1ã€ ç»“åˆ rollup
2ã€ ç»“åˆ webpack
æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨ ç¬¬äºŒç§æ–¹å¼ï¼Œå‚çœ‹æœ€å webpack å®ä¾‹ã€‚

### 2.2.2 [@babel/plugin-transform-runtime](https://babeljs.io/docs/en/babel-plugin-transform-runtime)

å¯¹äºä¸€èˆ¬åº”ç”¨å¼€å‘æ¥è¯´ï¼Œç›´æ¥ä½¿ç”¨ä¸Šè¿°çš„ polyfill æ–¹æ¡ˆæ˜¯æ¯”è¾ƒæ–¹ä¾¿çš„ï¼Œä½†å¦‚æœæ˜¯å¼€å‘å·¥å…·ã€åº“çš„è¯ï¼Œè¿™ç§æ–¹æ¡ˆæœªå¿…é€‚åˆ(ç”±ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œpolyfill æ˜¯æ·»åŠ è‡ªå®šä¹‰å…¨å±€å¯¹è±¡ æˆ–å‘å¯¹è±¡çš„ prototype ä¸Šæ·»åŠ æ–¹æ³•å®ç°çš„)ã€‚ä½¿ç”¨ @babel/plugin-transform-runtime è¿™ä¸ªæ’ä»¶å°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

å®‰è£…ï¼š

```bash
npm i -D @babel/plugin-transform-runtime @babel/runtime-corejs3
```

é…ç½®ï¼š

```js
module.exports = {
  presets: [['@babel/preset-env']],
  plugins: [
    [
      '@babel/plugin-transform-runtime',
      {
        corejs: 3,
      },
    ],
  ],
};
```

**è¯¥æ’ä»¶æ— æ³•è¯»å– preset-env çš„ targets æˆ–è€…æ˜¯ browserlist ä¸­çš„ç›®æ ‡å¹³å°å‚æ•°ï¼Œå› æ­¤ä¸ä¼šæ ¹æ®ç›®æ ‡å¹³å°æ¥å†³å®šæ˜¯å¦è¿›è¡Œè½¬æ¢å’Œæ³¨å…¥ polyfillsï¼Œè€Œæ˜¯å…¨è½¬æ¢å’Œæ³¨å…¥æ‰€æœ‰ã€‚ä»¥åå¯èƒ½ä¼šåœ¨ useBuiltIns ä¸­å¢åŠ ä¸€ä¸ªå‚æ•° "runtime" æ¥ä»£æ›¿è¯¥æ’ä»¶ã€‚**å¯å‚è§ï¼š[https://github.com/babel/babel/issues/10133](https://github.com/babel/babel/issues/10133)

å†è¿è¡Œ npm run buildï¼Œå¾—åˆ°ï¼š
{% asset_img runtime.jpg %}

å‡¡æ˜¯ require è¿›æ¥çš„æ¨¡å—éƒ½ç›´æ¥èµ‹å€¼ç»™æ™®é€šå˜é‡ï¼Œä¸ä¼šå¯¹ Map ã€ Object ç­‰å…¨å±€å˜é‡é€ æˆå½±å“ã€‚

**æ³¨ï¼šè¿™é‡Œçš„å’Œä¸Šè¾¹æ‰€æœ‰æåˆ°çš„â€œç¼–è¯‘â€ä¸€è¯æ›´å‡†ç¡®çš„è¯´æ³•åº”è¯¥æ˜¯â€œè½¬è¯‘ï¼ˆTranspileï¼‰â€ã€‚**

# 3 [Browserslist](https://github.com/browserslist/browserslist) (4.11.1)

Browserslist **æ˜¯ä¸€ä¸ª**èƒ½å¤Ÿåœ¨ä¸åŒçš„å‰ç«¯å·¥å…·é—´å…±äº«ç›®æ ‡æµè§ˆå™¨çš„**é…ç½®**ã€‚çœ‹é…ç½®å°±çŸ¥é“å½“å‰é¡¹ç›®æ”¯æŒçš„æµè§ˆå™¨æœ‰å“ªäº›ã€‚å®ƒä½¿ç”¨ [Can I Use](https://caniuse.com/) çš„æ•°æ®åšæŸ¥è¯¢ã€‚

åœ¨é¡¹ç›®ä¸­æ·»åŠ  Browserslistï¼Œ**å¸¸ç”¨**æœ‰ä¸¤ç§æ–¹å¼(**ä¸èƒ½åŒæ—¶åœ¨ .browserslistrc å’Œ package.json ä¸­é…ç½®ï¼Œå¦åˆ™ä½¿ç”¨ Babel è½¬è¯‘çš„æ—¶å€™ä¼šæŠ¥é”™**)ï¼š

- åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹æ·»åŠ  .browserslistrc æ–‡ä»¶

```text
> 1%
last 2 versions
ie > 8
```

- åœ¨ package.json æ–‡ä»¶ä¸­å¢åŠ  browserslist èŠ‚ç‚¹

```text
{
  "private": true,
  "dependencies": {

  },
  "browserslist": [
    "last 2 version",
    "> 1%",
    "ie > 8"
  ]
}

```

æŸ¥è¯¢ç»“æœå¯é€šè¿‡ [https://browserl.ist/](https://browserl.ist/) æ¥æŸ¥çœ‹ã€‚

è¿è¡Œå‘½ä»¤è¡Œï¼š

```bash
npx browserslist
```

å¯æŸ¥çœ‹å½“å‰é¡¹ç›®ç›®æ ‡æµè§ˆå™¨åˆ—è¡¨ã€‚**å¦‚æœåªæ˜¯åœ¨ babel.config.\* æ–‡ä»¶ä¸­é…ç½®äº† target æ˜¯æ£€æµ‹ä¸å‡ºæ¥çš„ï¼ˆä¼šä¼˜å…ˆä½¿ç”¨ï¼‰ï¼Œå› æ­¤å»ºè®®ä½¿ç”¨ å•ç‹¬çš„ .browserslistrc æ¥è®¾ç½®ã€‚**

# 4 [ESLint](https://eslint.org/) (7.26.0)

æ˜¯ä¸€ä¸ªå¯ä»¥æŸ¥æ‰¾å¹¶ä¸”ä¿®å¤ JavaScript(TypeScript)ä¸­é”™è¯¯çš„å·¥å…·ï¼Œç›®çš„æ˜¯ä¸ºäº†ä¿è¯ä»£ç é£æ ¼ç»Ÿä¸€ï¼Œé¿å…å‡ºé”™ã€‚

## 4.1 æ¦‚å¿µ

### 4.1.1 extendsï¼ˆæ‰©å±•ï¼‰

æ‰©å±•é‡Œå¡«çš„å†…å®¹æ˜¯åŒ…å«äº†ä¸€ç³»åˆ—è§„åˆ™çš„é…ç½®æ–‡ä»¶ã€‚è¿™ä¸ªä¸€èˆ¬ä¸éœ€è¦è‡ªå·±å®šä¹‰ï¼Œå› ä¸ºæœ‰å¾ˆå¤šç°æˆçš„ï¼šå¦‚ ESLint è‡ªèº«çš„ eslint:recommendedã€eslint:all å’Œç¤¾åŒºçš„ googleã€airbnbã€‚

é…ç½®çš„æ¨¡å—å(npm çš„åŒ…å)è¦ä¸º eslint-config-xxxï¼Œåœ¨é…ç½®ä¸­å¯ç¼©å†™ä¸º xxxã€‚

ä¾‹ï¼š

{% asset_img google.jpg %}

### 4.1.2 pluginsï¼ˆæ’ä»¶ï¼‰

extends ä¸­æ˜¯å¯¹ eslint ç°æœ‰è§„åˆ™çš„ä¸€ç³»åˆ—é¢„è®¾ï¼ˆå¼€å¯æˆ–å…³é—­ï¼‰ï¼Œè€Œ plugins ä¸ä»…å¯ä»¥å®šä¹‰é¢„è®¾ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰è§„åˆ™ï¼ˆæ¯”å¦‚è‡ªå·±åˆ›å»ºä¸€ä¸ª no-console**2**ï¼ŒåŒºåˆ«äº ESLint çš„ no-consoleï¼‰ï¼Œç”šè‡³å¯å¯¹ä¸æ˜¯ JavaScript ç±»å‹çš„æ–‡ä»¶ï¼ˆå¦‚ \*tsï¼Œ\*.mdï¼Œ\*.vueï¼‰æ‰©å±•è‡ªå·±çš„è§„åˆ™ã€‚

æ’ä»¶çš„æ¨¡å—åä¸€èˆ¬ä¸º eslint-plugin-xxxï¼Œåœ¨é…ç½®ä¸­å¯ç¼©å†™ä¸º xxxã€‚

ä¾‹ï¼š

{% asset_img react.jpg %}

### 4.1.3 rulesï¼ˆè§„åˆ™ï¼‰

ç›´æ¥é…ç½®å·²æœ‰è§„åˆ™çš„å¼€å¯ã€å…³é—­ã€‚æ¯”å¦‚å¼ºåˆ¶åœ¨ JavaScript ä¸­ä½¿ç”¨å•å¼•å·ï¼ˆ"quotes": [2, "single"]ï¼‰ã€‚è§„åˆ™å®šä¹‰ä¸­å‚æ•°çš„è®¾ç½®è¯´æ˜ï¼š

- "off" æˆ– 0ï¼šå…³é—­è§„åˆ™

- "warn" æˆ– 1ï¼šè­¦å‘Šï¼Œä¸ä¼šå½±å“ç¨‹åºæ‰§è¡Œ

- "error" æˆ– 2ï¼šé”™è¯¯ï¼Œç¨‹åºä¸èƒ½æ‰§è¡Œ

## 4.2 å®‰è£…

### 4.2.1 é’ˆå¯¹ JavaScript

```bash
npm i -D eslint eslint-config-airbnb-base eslint-plugin-import
```

#### 4.2.1.1 eslint-config-airbnb-base

åŒ…å«äº† airbnb æœ€åŸºç¡€ï¼ˆä¸åŒ…å« React ç›¸å…³ï¼‰çš„ JS ç¼–ç é£æ ¼è§„åˆ™ã€‚

#### 4.2.1.2 eslint-plugin-import

ä¸Šè¾¹çš„æ’ä»¶ä¾èµ–è¿™ä¸ªã€‚ğŸ˜›

### 4.2.2 [é’ˆå¯¹ TypeScript](https://github.com/typescript-eslint/typescript-eslint)

```bash
npm i -D eslint eslint-config-airbnb-typescript eslint-plugin-import @typescript-eslint/eslint-plugin
```

#### 4.2.2.1[eslint-config-airbnb-typescript](https://github.com/iamturns/eslint-config-airbnb-typescript)

Airbnb é£æ ¼çš„ TypeScript æ”¯æŒã€‚å®ƒå°†ä¸€äº›å¸¸è§é…ç½®éƒ½åŠ äº†è¿›å»ï¼Œçœä¸‹äº†å¥½å¤šå·¥ä½œé‡ã€‚
ps. è¿™æ˜¯ä¸€ä¸ªåŒˆç‰™åˆ©å¸ƒè¾¾ä½©æ–¯æŠ€æœ¯å’Œç»æµå¤§å­¦çš„å­¦ç”Ÿåšçš„ï¼Œæƒ³æƒ³è‡ªå·±çš„å¤§å­¦ç”Ÿæ´»éƒ½åœ¨åšå•¥...

è¯¥æ’ä»¶åŒ…å«äº†@typescript-eslint/parserï¼ˆTypeScript è§£æå™¨ï¼‰ï¼Œå®ƒè°ƒç”¨@typescript-eslint/typescript-estreeï¼ˆé€šè¿‡åœ¨ç»™å®šçš„æºä»£ç ä¸Šè°ƒç”¨ TypeScript ç¼–è¯‘å™¨ï¼Œå°±æ˜¯ npm i typescript -D å®‰è£…çš„é‚£ä¸ªï¼Œä»¥äº§ç”Ÿ TypeScript ASTï¼Œç„¶åå°†è¯¥ AST è½¬æ¢ä¸º ESLint æœŸæœ›çš„æ ¼å¼ï¼‰ã€‚ESlint é»˜è®¤çš„è§£æå™¨å« espreeã€‚

#### 4.2.2.2 @typescript-eslint/eslint-plugin

ä¸ @typescript-eslint/parser ç»“åˆä½¿ç”¨æ—¶ï¼Œè¿è¡Œ TypeScript çš„åˆ†æè§„åˆ™ã€‚

## 4.3 é…ç½®

å¯ä½¿ç”¨ .eslintrc._( å¯ä¸º ç©ºï¼Œjs, yaml, yml, jsonï¼‰æˆ–åœ¨ package.json ä¸­é…ç½®ï¼Œè¿™é‡Œä½¿ç”¨ .eslintrc.js æ¥è¿›è¡Œé…ç½®ã€‚ ä¸€ä¸ªé¡¹ç›®ä¸­åœ¨ä¸åŒçš„æ–‡ä»¶å¤¹ä¸‹å¯ä»¥æœ‰å¤šä¸ª .eslintrc._ é…ç½®æ–‡ä»¶ï¼Œè¿™æ ·å¯ä»¥çº¦æŸä¸åŒæ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶ä½¿ç”¨ä¸åŒçš„é£æ ¼ï¼Œè¿™ä¸€ç‚¹å’Œ editorConfig ä¸€æ ·ã€‚

### 4.3.1 é’ˆå¯¹ JavaScript

ä¸€èˆ¬é…ç½®å¦‚ä¸‹ï¼š

```js
module.exports = {
  root: true, //Â æ„æ€æ˜¯åˆ°å¤´å•¦ï¼Œä¸è¦å†å‘ä¸Šæ‰¾äº†
  env: {
    //Â ä»£ç å°†ä¼šåœ¨å“ªäº›ç¯å¢ƒä¸­è¿è¡Œã€‚æ¯ä¸ªç¯å¢ƒéƒ½é™„å¸¦äº†ä¸€ç»„ç‰¹å®šçš„é¢„å®šä¹‰å…¨å±€å˜é‡ï¼Œå¦‚Â browserÂ ä¸­æœ‰Â windowï¼Œdocumentç­‰ï¼Œæ·»åŠ åå¯ä»¥ç›´æ¥åœ¨ä»£ç ä¸­ä½¿ç”¨ï¼Œè€Œä¸æŠ¥é”™ã€‚
    browser: true,
    node: true,
    es2020: true,
  },
  extends: 'airbnb-base', //Â ä½¿ç”¨airbnbé£æ ¼
  parserOptions: {
    ecmaVersion: 2020, //Â å¯ç”¨ES2020çš„è¯­æ³•
  },
  rules: {
    'no-console': process.env.NODE_ENV === 'production' ? 'warn' : 'off', //Â åªåœ¨æ‰“åŒ…æ—¶å¼ºåˆ¶ä¸ä½¿ç”¨console
    'no-debugger': process.env.NODE_ENV === 'production' ? 'warn' : 'off', //Â åªåœ¨æ‰“åŒ…æ—¶å¼ºåˆ¶ä¸ä½¿ç”¨debugger
    'max-len': ['error', { code: 160 }], // å•è¡Œæœ€å¤§160ä¸ªå­—ç¬¦
    'multiline-comment-style': ['error', 'starred-block'], // æ ¼å¼åŒ–æ³¨é‡Š
  },
};
```

### 4.3.2 é’ˆå¯¹ TypeScript

ä¸€èˆ¬è®¾ç½®å¦‚ä¸‹ï¼š

```js
module.exports = {
  root: true, //Â æ„æ€æ˜¯åˆ°å¤´å•¦ï¼Œä¸è¦å†å‘ä¸Šæ‰¾äº†
  env: {
    //Â ä»£ç å°†ä¼šåœ¨å“ªäº›ç¯å¢ƒä¸­è¿è¡Œã€‚æ¯ä¸ªç¯å¢ƒéƒ½é™„å¸¦äº†ä¸€ç»„ç‰¹å®šçš„é¢„å®šä¹‰å…¨å±€å˜é‡ï¼Œå¦‚Â browserÂ ä¸­æœ‰Â windowï¼Œdocumentç­‰ï¼Œæ·»åŠ åå¯ä»¥ç›´æ¥åœ¨ä»£ç ä¸­ä½¿ç”¨ï¼Œè€Œä¸æŠ¥é”™ã€‚
    browser: true,
    node: true,
  },
  extends: [
    'airbnb-typescript/base', //Â ä½¿ç”¨airbnbé£æ ¼
    'plugin:@typescript-eslint/eslint-recommended',
    'plugin:@typescript-eslint/recommended',
    'plugin:@typescript-eslint/recommended-requiring-type-checking',
  ],
  parserOptions: {
    project: './tsconfig.json', //Â è¦åœ¨tsconfigä¸­è®¾ç½®ç¼–è¯‘çš„ç‰ˆæœ¬
  },
  rules: {
    'no-console': process.env.NODE_ENV === 'production' ? 'warn' : 'off', //Â åªåœ¨æ‰“åŒ…æ—¶å¼ºåˆ¶ä¸ä½¿ç”¨console
    'no-debugger': process.env.NODE_ENV === 'production' ? 'warn' : 'off', //Â åªåœ¨æ‰“åŒ…æ—¶å¼ºåˆ¶ä¸ä½¿ç”¨debugger
    'max-len': ['error', { code: 160 }], // å•è¡Œæœ€å¤§160ä¸ªå­—ç¬¦
    'multiline-comment-style': ['error', 'starred-block'], // æ ¼å¼åŒ–æ³¨é‡Š
  },
};
```

**æœ€åè¦åœ¨ VS Code ä¸­å®‰è£… ESLint æ’ä»¶ï¼Œé…ç½®ç›¸å…³å‚æ•°ï¼Œä½¿ä¹‹èƒ½å¤Ÿåœ¨æ–‡ä»¶ä¿å­˜æ—¶è‡ªåŠ¨ä¿®å¤æ ¼å¼é”™è¯¯ï¼›WebStrom ä¸­åˆ™éœ€è®¾ç½®å…è®¸ ESLintï¼ˆæœ€æ–°çš„ 2020.1.1 ç‰ˆæœ¬ä¸­ä¹Ÿèƒ½å¤Ÿåœ¨æ–‡ä»¶ä¿å­˜æ—¶è‡ªåŠ¨ä¿®å¤é”™è¯¯ï¼‰ã€‚**

# 5 [stylelint](https://stylelint.io/)

# 5 [EditorConfig](https://editorconfig.org/)

å¸®åŠ©åœ¨ä¸åŒçš„ç¼–è¾‘å™¨æˆ– IDE ä¸Šä»äº‹åŒä¸€é¡¹ç›®çš„å¤šä¸ªå¼€å‘äººå‘˜ä¿æŒä¸€è‡´çš„ç¼–ç æ ·å¼ã€‚

ä¸€ä¸ªé¡¹ç›®é‡Œå¯ä»¥æœ‰å¤šä¸ª.editorconfig åˆ†åˆ«æ”¾ç½®åœ¨ä¸åŒçš„æ–‡ä»¶å¤¹ä¸­ï¼Œå½“ VS Code è¿™ç±»ç¼–è¾‘å™¨æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œå®ƒä¼šæ£€æŸ¥è¿™ä¸ªæ–‡ä»¶æ‰€åœ¨ç›®å½•å’Œå®ƒçš„çˆ¶çº§æ–‡ä»¶å¤¹ï¼ˆç›´åˆ°é¡¹ç›®æ ¹ç›®å½•æˆ–è€…æ˜¯æ˜¯æŸä¸ªæ–‡ä»¶å¤¹ä¸­çš„ .editorconfig é‡Œæ ‡è¯†äº† root = true æ‰ä¼šåœæ­¢)ä¸­æ˜¯å¦å­˜åœ¨ .editorconfigã€‚è¢«æ‰“å¼€çš„æ–‡ä»¶æ ¼å¼ä¼šä»¥è·å½“å‰æ–‡ä»¶æœ€è¿‘çš„ .editorconfig ä¸­çš„å†…å®¹ä¸ºå‡†ã€‚

ä¸€èˆ¬é…ç½®å¦‚ä¸‹ï¼š

```text
# å‘Šè¯‰ç¼–è¾‘å™¨è¿™æ˜¯æœ€é¡¶å±‚çš„ï¼ˆä¸è¦å†å‘ä¸Šæ‰¾äº†ï¼‰ EditorConfig æ–‡ä»¶
root = true

[*]
charset = utf-8        # è®¾ç½®ç¼–ç ä¸ºutf-8
indent_style = space   # ç¼©è¿›æ–¹å¼ä¸ºç©ºæ ¼
indent_size = 2        # ç¼©è¿›å¤§å°ä¸º2ä¸ªå­—ç¬¦
end_of_line = lf       # æ¢è¡Œç¬¦ï¼Œå¯é€‰"lf"ã€"cr"ã€"crlf"
trim_trailing_whitespace = true  # åˆ é™¤è¡Œå°¾ç©ºæ ¼
insert_final_newline = true      # å§‹ç»ˆåœ¨æ–‡ä»¶æœ«å°¾æ’å…¥ä¸€ä¸ªæ–°è¡Œ
max_line_length = 160            # å•è¡Œæœ€å¤§å­—ç¬¦æ•° 160

[*.md]
insert_final_newline = false
trim_trailing_whitespace = false

```

# 6 [webpack](https://webpack.js.org/) **(**[5.37.0](https://github.com/webpack/webpack/releaseshttps://github.com/webpack/webpack/releases))

webpack æ˜¯ç”¨äºç°ä»£ JavaScript åº”ç”¨ç¨‹åºçš„é™æ€æ¨¡å—æ‰“åŒ…å™¨ã€‚
å½“ webpack å¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šåœ¨å†…éƒ¨æ„å»ºä¸€ä¸ªä¾èµ–å…³ç³»å›¾ï¼Œè¯¥å›¾æ˜ å°„é¡¹ç›®æ‰€éœ€çš„æ¯ä¸ªæ¨¡å—æœ€ç»ˆä¼šç”Ÿæˆä¸€ä¸ªæˆ–å¤šä¸ªåŒ…ã€‚

## 6.1 æ¦‚å¿µ

### 6.1.1 [modules](https://webpack.js.org/concepts/modules/)

webpack ä¸­ï¼Œæ— è®ºæ˜¯ JS ã€CSS è¿˜æ˜¯å›¾ç‰‡ç­‰ï¼Œæ€»ä¹‹ä¸€åˆ‡çš†æ¨¡å—ã€‚ æœ‰ç‚¹åƒ RxJSï¼Œä¸€åˆ‡çš†æ•°æ®æµã€‚
æ¨¡å—é—´ä¾èµ–çš„è¡¨è¿°æœ‰å¾ˆå¤šç§æ–¹å¼ï¼Œå¦‚ï¼šimportï¼Œrequireï¼Œdefineï¼Œ@importï¼Œurl(...), \<img src=...> ç­‰ç­‰ã€‚

### 6.1.2 [Entry](https://webpack.js.org/concepts/#entry) & [Output](https://webpack.js.org/concepts/#output)

å…¥å£æŒ‡ç¤º webpack åº”è¯¥ä½¿ç”¨å“ªä¸ªæ¨¡å—å¼€å§‹æ„å»ºå…¶å†…éƒ¨ä¾èµ–å…³ç³»å›¾ã€‚é»˜è®¤ä¸ºï¼š ./src/index.jsã€‚

å‡ºå£å‘Šè¯‰ webpack åœ¨ä½•å¤„å‘å‡ºå®ƒåˆ›å»ºçš„åŒ…æ–‡ä»¶ä»¥åŠå¦‚ä½•å‘½åè¿™äº›æ–‡ä»¶ã€‚é»˜è®¤ä¸ºï¼š ./dist/main.js

### 6.1.3 [Loaders](https://webpack.js.org/concepts/#loaders)

webpack é»˜è®¤åªèƒ½è§£æ JavaScript å’Œ JSONï¼Œå¯ä»¥é€šè¿‡æ·»åŠ  Loaders æ¥å¤„ç†å…¶ä»–ç±»å‹çš„æ–‡ä»¶ã€‚

### 6.1.4 [Plugins](https://webpack.js.org/concepts/#plugins)

å¯ä»¥åˆ©ç”¨æ’ä»¶æ¥æ‰§è¡Œæ›´å¹¿æ³›çš„ä»»åŠ¡ï¼Œä¾‹å¦‚æ‰“åŒ…ä¼˜åŒ–ï¼Œèµ„äº§ç®¡ç†å’Œç¯å¢ƒå˜é‡çš„æ³¨å…¥ã€‚

### 6.1.5 [Mode](https://webpack.js.org/concepts/#mode)

åˆ† developmentã€productionã€none ä¸‰ç§ï¼Œæ¯ç§éƒ½ä¼šå¯¹åº”ä¸€ç³»åˆ—é»˜è®¤é…ç½®ã€‚

## 6.2 å®æˆ˜

æ¥ä¸‹æ¥ä»¥åˆå§‹åŒ–ä¸€ä¸ª TypeScript + SCSS é¡¹ç›®ä¸ºä¾‹ï¼Œä»‹ç»ä¸‹ webpack5 çš„é…ç½®æµç¨‹ã€‚

åœ¨å¼€å§‹ä¹‹å‰å…ˆè¯´ä¸‹ï¼Œä¸ºä½•æ²¡ç”¨ ts-loader å’Œ TSLintï¼š

- ç”±äº TSLint çš„æ€§èƒ½ä¸å¦‚ ESLintï¼Œå†åŠ ä¸Šæœ‰å¾ˆå¤šçƒ­é—¨çš„ç¤¾åŒºï¼ˆReact Hooksã€Vueï¼‰ï¼Œéƒ½æ˜¯é€šè¿‡ ESLint æ¥æ„å»ºè§„åˆ™ï¼Œå› æ­¤ï¼ŒTypeScript å›¢é˜Ÿå†³å®šä¸“æ³¨æ”¯æŒ ESLintã€‚

- Babel7 è™½ç„¶ä¸æ”¯æŒ TS ç±»å‹æ£€æŸ¥ï¼Œä½†å·²ç»æ”¯æŒè½¬è¯‘ã€‚ æ„å»ºéœ€è¦å®‰è£…çš„æ’ä»¶ã€å·¥å…·å¤ªå¤šï¼Œèƒ½å°‘ä¸€ä¸ªå°±å°‘ä¸€ä¸ªï¼Œä¸€ä¸ªç¼–è¯‘å™¨æ—¢èƒ½æ”¯æŒ JSï¼Œåˆèƒ½æ”¯æŒ TSï¼Œä¸ºä½•ä¸ç”¨ã€‚å› æ­¤ï¼Œæ„Ÿè§‰ ts-loader çš„ç”Ÿå‘½ä¹Ÿä¸ä¼šå¤ªé•¿äº†...

**Node ç¯å¢ƒè¦æ±‚è‡³å°‘ä¸ºï¼š10.13.0ã€‚**

### 6.2.1 åˆå§‹åŒ–é¡¹ç›®

```bash
npm init
```

åœ¨å‘½ä»¤è¡Œä¸­å¡«å…¥é¡¹ç›®ç›¸å…³ä¿¡æ¯ï¼Œä¸å»ºè®®ä¸€è·¯å›è½¦...

### 6.2.2 å®‰è£… webpack

webpack æ˜¯æœ€æ–°çš„ webpack5ã€‚

```bash
npm i -D webpack webpack-cli
```

å¦‚æœéœ€è¦ä¸€ä¸ª web æœåŠ¡å™¨åšè°ƒè¯•å’Œçƒ­æ›´æ–°ï¼Œåˆ™éœ€å®‰è£…ï¼š

```bash
npm i -D webpack-dev-server
```

### 6.2.3 åˆ›å»º .editorconfig

ç»Ÿä¸€ç¼–ç æ ·å¼ã€‚

```text
# å‘Šè¯‰ç¼–è¾‘å™¨è¿™æ˜¯æœ€é¡¶å±‚çš„ï¼ˆä¸è¦å†å‘ä¸Šæ‰¾äº†ï¼‰ EditorConfig æ–‡ä»¶
root = true

[*]
charset = utf-8        # è®¾ç½®ç¼–ç ä¸ºutf-8
indent_style = space   # ç¼©è¿›æ–¹å¼ä¸ºç©ºæ ¼
indent_size = 2        # ç¼©è¿›å¤§å°ä¸º2ä¸ªå­—ç¬¦
end_of_line = lf       # æ¢è¡Œç¬¦ï¼Œå¯é€‰"lf"ã€"cr"ã€"crlf"
trim_trailing_whitespace = true  # åˆ é™¤è¡Œå°¾ç©ºæ ¼
insert_final_newline = true      # å§‹ç»ˆåœ¨æ–‡ä»¶æœ«å°¾æ’å…¥ä¸€ä¸ªæ–°è¡Œ
max_line_length = 160            # å•è¡Œæœ€å¤§å­—ç¬¦æ•° 160

[*.md]
insert_final_newline = false
trim_trailing_whitespace = false

```

### 6.2.4 å®‰è£… TypeScript ç¼–è¯‘å™¨å¹¶é…ç½®

å®‰è£…ç¼–è¯‘å™¨çš„ç›®çš„æ˜¯ä¸ºäº†é…åˆ ESLint åšä»£ç æ£€æŸ¥å’Œè‡ªåŠ¨ä¿®å¤ã€‚

```bash
npm i -D typescript
```

åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º [tsconfig.json](https://www.typescriptlang.org/docs/handbook/tsconfig-json.html)ï¼Œå…¶ä¸­å¯å®šä¹‰å…¥å£æ–‡ä»¶ä»¥åŠç¼–è¯‘çš„å‚æ•°ï¼Œç”¨äºå°† TypeScript è½¬è¯‘ä¸º JavaScriptã€‚

ä¸€å®šè¦è®¾ç½®ï¼Œå¦åˆ™åœ¨ IDE åšè¯­æ³•æ ¡éªŒçš„æ—¶å€™ï¼Œæ–° JavaScript APIï¼ˆå¦‚ï¼š Object.fromEntries ï¼‰ä¼šæŠ¥é”™ã€‚

```text
{
  "compilerOptions": {
    "lib": [
      "ESNext",
      "DOM"
    ]
  }
}
```

ESNext æŒ‡çš„æ˜¯ TypeScript æ”¯æŒçš„æœ€æ–°ç‰ˆæœ¬çš„ ESã€‚å®ƒä¼šéšç€ ES ç‰ˆæœ¬çš„æ›´æ–°è€Œè‡ªåŠ¨æ›´æ–°ï¼Œä¸€åŠ³æ°¸é€¸ã€‚
DOM ç±»å‹å®šä¹‰ï¼Œå…è®¸åœ¨ TS ä¸­ç›´æ¥å†™ windowï¼Œdocumentã€‚

### 6.2.5 å®‰è£… ESLint å¹¶é…ç½®

```bash
npm i -D eslint eslint-config-airbnb-typescript eslint-plugin-import @typescript-eslint/eslint-plugin
```

.eslintrc.js

```js
module.exports = {
  root: true, //Â è¿™ä¸ªé…ç½®åŒÂ editorConfigï¼Œæ„æ€æ˜¯ä¸è¦æ‰¾äº†
  env: {
    //Â ä»£ç å°†ä¼šåœ¨å“ªäº›ç¯å¢ƒä¸­è¿è¡Œã€‚æ¯ä¸ªç¯å¢ƒéƒ½é™„å¸¦äº†ä¸€ç»„ç‰¹å®šçš„é¢„å®šä¹‰å…¨å±€å˜é‡ï¼Œå¦‚Â browserÂ ä¸­æœ‰Â windowï¼Œdocumentç­‰ï¼Œæ·»åŠ åå¯ä»¥ç›´æ¥åœ¨ä»£ç ä¸­ä½¿ç”¨ï¼Œè€Œä¸æŠ¥é”™ã€‚
    browser: true,
    node: true,
  },
  extends: [
    'airbnb-typescript/base', //Â ä½¿ç”¨airbnbé£æ ¼
    'plugin:@typescript-eslint/eslint-recommended',
    'plugin:@typescript-eslint/recommended',
    'plugin:@typescript-eslint/recommended-requiring-type-checking',
  ],
  parserOptions: {
    project: './tsconfig.json', //Â è¦åœ¨tsconfigä¸­è®¾ç½®ç¼–è¯‘çš„ç‰ˆæœ¬
  },
  rules: {
    'no-console': process.env.NODE_ENV === 'production' ? 'warn' : 'off', //Â åªåœ¨æ‰“åŒ…æ—¶å¼ºåˆ¶ä¸ä½¿ç”¨console
    'no-debugger': process.env.NODE_ENV === 'production' ? 'warn' : 'off', //Â åªåœ¨æ‰“åŒ…æ—¶å¼ºåˆ¶ä¸ä½¿ç”¨debugger
    'max-len': ['error', { code: 160 }], // å•è¡Œæœ€å¤§160ä¸ªå­—ç¬¦
    'multiline-comment-style': ['error', 'starred-block'], // æ ¼å¼åŒ–æ³¨é‡Š
  },
};
```

### 6.2.6 åˆ›å»º .gitignore

æäº¤ Git æœåŠ¡å™¨æ—¶ï¼Œå¿½ç•¥çš„æ–‡ä»¶åˆ—è¡¨ã€‚ä½¿ç”¨ SVN çš„å°±ä¸éœ€è¦è¿™ä¸ªäº†ã€‚

```text
.DS_Store
node_modules
/dist

#Â localÂ envÂ files
.env.local
.env.*.local

#Â LogÂ files
npm-debug.log*
yarn-debug.log*
yarn-error.log*

#Â EditorÂ directoriesÂ andÂ files
.idea
.vscode
*.suo
*.ntvs*
*.njsproj
*.sln
*.sw?
.git

```

### 6.2.7 åˆ›å»º .browserslistrc

è¿™é‡Œè®¾ç½®å…¼å®¹ IE11ã€‚**å½“å‰é¡¹ç›®å¦‚æœæ˜¯ä½œä¸ºåº“ä½¿ç”¨çš„è¯ï¼Œè¯¥è®¾ç½®ä¸ä¼šèµ·ä½œç”¨ã€‚**è¯¦æƒ…è§ï¼š[babel-plugin-transform-runtime](#babel-plugin-transform-runtime)

```text
> 1%
last 2 versions
not ie < 11

```

### 6.2.8 å®‰è£… webpack loaders

æ‰€æœ‰ Loaders éƒ½åœ¨ webpack.config.js æ–‡ä»¶ä¸­çš„ module èŠ‚ç‚¹ä¸­è¿›è¡Œæ·»åŠ ã€‚

#### 6.2.8.1 è½¬è¯‘

##### 6.2.8.1.1 babel-loader åŠç›¸å…³

webpack æœ¬èº«åªèƒ½æ‰“åŒ…ï¼ˆæ¨¡å—åˆå¹¶ï¼‰è€Œæ²¡æœ‰è½¬è¯‘çš„èƒ½åŠ›ï¼ŒTS è½¬è¯‘æˆ JS ç”¨çš„æ˜¯ Babel ï¼Œå¹¶æ²¡æœ‰ä½¿ç”¨ TypeScript ç¼–è¯‘å™¨ã€‚

```bash
npm i -D babel-loader

npm i -D @babel/core @babel/preset-env @babel/preset-typescript core-js
```

babel.config.jsï¼š

```js
module.exports = {
  presets: [
    [
      '@babel/preset-env',
      {
        useBuiltIns: 'usage',
        corejs: 3,
      },
    ],
    '@babel/preset-typescript',
  ],
};
```

webpack.config.js ç‰‡æ®µ:

```js
module: {
  rules: [
    // ä½¿ç”¨ babel-loader è§£æ ts, js, tsx, jsx æ–‡ä»¶.
    {
      test: /\.(ts|js)x?$/, // åŒ¹é…æ‰©å±•åä¸º .ts,.js,.tsx.jsx çš„æ–‡ä»¶
      use: 'babel-loader', // ä½¿ç”¨ babel-loader æ¥è¿›è¡Œè§£æ
      exclude: /node_modules/, // æ’é™¤ node_modules æ–‡ä»¶ä¸‹çš„æ–‡ä»¶
    },
  ];
}
```

æ›´å¤šé…ç½®å¯è§ä¸‹æ–¹å®Œæ•´çš„é…ç½®ã€‚

**å½“å‰é¡¹ç›®å°†è¦ä½œä¸ºåº“çš„è¯ï¼Œè¿˜å¾—å®‰è£…ï¼š**

```bash
npm i -D @babel/plugin-transform-runtime @babel/runtime-corejs3
```

**åŒæ—¶ babel.config.js ä¸­çš„é…ç½®æ”¹æˆä¸‹é¢è¿™ä¸ªï¼š**

```js
module.exports = {
  presets: ['@babel/preset-env', '@babel/preset-typescript'],
  plugins: [
    [
      '@babel/plugin-transform-runtime',
      {
        corejs: 3,
      },
    ],
  ],
};
```

#### 6.2.8.2 æ ·å¼

##### 6.2.8.2.1 sass-loader

åŠ è½½ SASS/SCSS æ–‡ä»¶ å¹¶å°†å…¶ç¼–è¯‘ä¸º CSSã€‚

```bash
npm i -D sass-loader node-sass
```

sass-loader è¦æ±‚è¦å®‰è£… Dart Sass æˆ–è€…æ˜¯ Node Sassã€‚å¼„è¿‡ NPM ä¸‹è½½ä¸‹æ¥çš„è¿™ä¸¤è€…åªæ˜¯ä¸ªç¼–è¯‘å™¨ã€‚æ®è¯´å‰è€…åœ¨ node ç¯å¢ƒä¸­æ€§èƒ½æ¯”åè€…è¦å·®ï¼Œå› æ­¤ä¸€èˆ¬éƒ½ä¼šä½¿ç”¨ node-sassã€‚

webpack.config.js ä¸€èˆ¬é…ç½®å¦‚ä¸‹ï¼š

```js
//Â æ‰§è¡Œé¡ºåºï¼šä»å³åˆ°å·¦
Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â test:Â /\.s[ac]ss$/i,
Â Â Â Â Â Â Â Â use:Â [
Â Â Â Â Â Â Â Â Â Â //Â ä»å­—ç¬¦ä¸²ä¸­åˆ›å»ºstyleæ ‡ç­¾åˆ°HTMLçš„Headerä¸­
Â Â Â Â Â Â Â Â Â Â 'style-loader',
Â Â Â Â Â Â Â Â Â Â //Â è½¬æ¢CSSä¸ºå­—ç¬¦ä¸²
Â Â Â Â Â Â Â Â Â Â 'css-loader',
Â Â Â Â Â Â Â Â Â Â //Â ç»™CSSæ·»åŠ å‰ç¼€ä»¥é€‚åº”å„æµè§ˆå™¨
Â Â Â Â Â Â Â Â Â Â 'postcss-loader',
Â Â Â Â Â Â Â Â Â Â //Â ç¼–è¯‘Â SassÂ åˆ°Â CSS
Â Â Â Â Â Â Â Â Â Â 'sass-loader',
Â Â Â Â Â Â Â Â ],
Â Â Â Â Â Â },

```

##### 6.2.8.2.2 postcss-loader

[PostCSS](http://postcss.org/)æ˜¯ CSS è¯­æ³•è½¬æ¢çš„å·¥å…·ã€‚å®ƒæä¾› API æ¥å¯¹ CSS æ–‡ä»¶è¿›è¡Œåˆ†æå’Œä¿®æ”¹å®ƒçš„è§„åˆ™ã€‚
åˆ©ç”¨å…¶æ’ä»¶ autoprefixer ï¼Œå¯ä»¥ç»™ CSS æ·»åŠ ç›®æ ‡æµè§ˆå™¨ï¼ˆBrowserslist ä¸­å®šä¹‰çš„ï¼‰å‰ç¼€ã€‚

```text
-moz-     /* ç«ç‹ç­‰ä½¿ç”¨Mozillaæµè§ˆå™¨å¼•æ“çš„æµè§ˆå™¨ */
-webkit-  /* Safari, è°·æ­Œæµè§ˆå™¨ç­‰ä½¿ç”¨Webkitå¼•æ“çš„æµè§ˆå™¨ */
-o-       /* Operaæµè§ˆå™¨(æ—©æœŸ) */
-ms-      /* Internet Explorer */
```

```bash
npm i -D postcss-loader autoprefixer
```

åˆ›å»º postcss.config.js, å®šä¹‰ PostCSS çš„æ’ä»¶ä¸º Â autoprefixerï¼š

```js
module.exports = {
  plugins: {
    autoprefixer: {},
  },
};
```

##### 6.2.8.2.3 css-loader

åŠ è½½ CSS æ–‡ä»¶ï¼Œå¹¶ä»¥ JS æ¨¡å—ï¼ˆCSS æ ·å¼ä»¥å­—ç¬¦ä¸²çš„å½¢å¼å°è£…åœ¨å…¶ä¸­ï¼‰çš„å½¢å¼è¿”å›ã€‚

- å¦‚æœåªä½¿ç”¨ css-loaderï¼Œè§£æå‡ºçš„ CSS å†…å®¹éƒ½åœ¨æ‰“åŒ…åçš„ js ä»£ç ä¸­ï¼Œæ²¡æœ‰ä»»ä½•ä½œç”¨ã€‚
- åªæœ‰é…åˆ style-loader æˆ– mini-css-extract-plugin ç­‰ï¼Œå¼•ç”¨çš„æ ·å¼æ‰ä¼šèµ·ä½œç”¨ã€‚

```bash
npm i -D css-loader
```

##### 6.2.8.2.4 style-loader

å°† CSS æ ·å¼æ³¨å…¥åˆ° DOM ä¸­ã€‚é»˜è®¤æ˜¯åœ¨\<header>æœ€åæ·»åŠ \<style>ï¼Œè¿™æ˜¯é€šè¿‡ç”Ÿæˆ JS æ–¹æ³•åŠ¨æ€æ·»åŠ çš„ã€‚

```bash
npm i -D style-loader
```

ä¸€èˆ¬è¿™æ ·é…ç½®ï¼š

```js
{
    test:Â /\.css$/,
    use:Â ['style-loader',Â 'css-loader',Â 'postcss-loader'],
},

```

#### 6.2.8.3 æ–‡ä»¶

##### 6.2.8.3.1 url-loader

å°†å°äºä¸€ä¸ªé™åˆ¶å¤§å°çš„æ–‡ä»¶è½¬æ¢ä¸º[base64 URIs](https://tools.ietf.org/html/rfc2397)ã€‚è¶…è¿‡é™åˆ¶çš„ï¼Œä¼šé»˜è®¤ä½¿ç”¨ file-loader æ¥åšå¤„ç†ã€‚æ‰€ä»¥è¿™é‡Œä¸€å®šè¦æŠŠ file-loader ä¹Ÿå®‰è£…ä¸Šã€‚

```bash
npm i -D url-loader file-loader
```

##### 6.2.8.3.2 file-loader

ç”Ÿæˆæ–‡ä»¶åˆ°è¾“å‡ºçš„æ–‡ä»¶å¤¹ä¸­ï¼Œå¹¶è¿”å›ç›¸å¯¹è·¯å¾„ URLÂ ã€‚

```bash
npm i -D file-loader
```

### 6.2.9 å®‰è£… webpack plugins

#### 6.2.9.1 [HTMLWebpackPlugin](https://webpack.js.org/plugins/html-webpack-plugin/)

ä¼šç”Ÿæˆä¸€ä¸ª HTML5 æ–‡ä»¶ï¼Œå…¶ä¸­ body ä¸­ä¼šåŠ å…¥æ‰€æœ‰ webpack æ‰“åŒ…å‡ºæ¥çš„å†…å®¹ã€‚

```bash
npm i -D html-webpack-plugin
```

#### 6.2.9.2 [clean-webpack-plugin](https://github.com/johnagan/clean-webpack-plugin)

ç§»é™¤æˆ–æ¸…ç©ºæ„å»ºå‡ºçš„æ–‡ä»¶å¤¹ã€‚

```bash
npm i -D clean-webpack-plugin
```

#### 6.2.9.3 mini-css-extract-plugin

å°† CSS æå–åˆ°å•ç‹¬çš„ CSS æ–‡ä»¶ä¸­ã€‚

```bash
npm i -D mini-css-extract-plugin
```

ä¸€èˆ¬çš„é…ç½®å¦‚ä¸‹ï¼š

```js
const MiniCssExtractPlugin = require("mini-css-extract-plugin");


 module:Â {
Â Â Â Â rules:Â [
      ...
      {
Â Â Â Â Â Â Â Â test:Â /\.s[ac]ss$/i,
Â Â Â Â Â Â Â Â use:Â [
Â Â Â Â Â Â Â Â Â Â //Â æå–åˆ°å•ç‹¬çš„CSSæ–‡ä»¶
Â Â Â Â Â Â Â Â Â Â MiniCssExtractPlugin.loader,
Â Â Â Â Â Â Â Â Â Â //Â è½¬æ¢Â CSSÂ åˆ°Â CommonJS
Â Â Â Â Â Â Â Â Â Â 'css-loader',
Â Â Â Â Â Â Â Â Â Â //Â ç»™Â CSSÂ æ·»åŠ å‰ç¼€ä»¥é€‚åº”å„æµè§ˆå™¨
Â Â Â Â Â Â Â Â Â Â 'postcss-loader',
Â Â Â Â Â Â Â Â Â Â //Â ç¼–è¯‘Â SassÂ åˆ°Â CSS
Â Â Â Â Â Â Â Â Â Â 'sass-loader',
Â Â Â Â Â Â Â Â ],
      },
    ],
Â Â },



plugins:Â [
 ...js
    newÂ MiniCssExtractPlugin({
Â Â Â Â Â Â filename:Â 'css/[name].css',
Â Â Â Â Â Â chunkFilename:Â 'css/[id].css',
Â Â Â Â }),
],

```

#### 6.2.9.4 webpack-bundle-analyzer

å¯è§†åŒ– webpack è¾“å‡ºæ–‡ä»¶çš„å¤§å°ã€‚

```bash
npm i -D webpack-bundle-analyzer
```

```js
const { BundleAnalyzerPlugin } = require('webpack-bundle-analyzer');

module.exports = {
  plugins: [new BundleAnalyzerPlugin()],
};
```

### 6.2.10 åˆ›å»º webpack.config.js

é…ç½® webPack æ¥å¤„ç† TypeScriptã€‚

```javascript
const { CleanWebpackPlugin } = require('clean-webpack-plugin');
const HtmlWebpackPlugin = require('html-webpack-plugin');
const MiniCssExtractPlugin = require('mini-css-extract-plugin');
const path = require('path');

const config = {
  entry: './src/index.ts', //Â å…¥å£æ–‡ä»¶
  externals: {
    // cesium:Â 'Cesium',
  },
  module: {
    rules: [
      //Â ä½¿ç”¨Â babel-loaderÂ è§£æÂ ts,Â js,Â tsx,Â jsxÂ æ–‡ä»¶.
      {
        test: /\.(ts|js)x?$/,
        use: 'babel-loader',
        exclude: /node_modules/,
      }, //Â æ‰§è¡Œé¡ºåºï¼šä»å³åˆ°å·¦
      {
        test: /\.s[ac]ss$/i,
        use: [
          //Â æå–åˆ°å•ç‹¬çš„CSSæ–‡ä»¶
          MiniCssExtractPlugin.loader, //Â è½¬æ¢Â CSSÂ åˆ°Â CommonJS
          'css-loader', //Â ç»™Â CSSÂ æ·»åŠ å‰ç¼€ä»¥é€‚åº”å„æµè§ˆå™¨
          'postcss-loader', //Â ç¼–è¯‘Â SassÂ åˆ°Â CSS
          'sass-loader',
        ],
      }, //Â ä½¿ç”¨Â url-loaderÂ å°†å°äºÂ 4KBÂ å›¾ç‰‡Â è½¬æ¢ä¸ºÂ base64Â URIs
      {
        test: /\.(png|jpe?g|gif|webp)$/i,
        use: [
          {
            loader: 'url-loader',
            options: {
              name: 'images/[name].[hash:8].[ext]',
              limit: 4096,
              esModule: false,
            },
          },
        ],
      },
    ],
  },
  resolve: {
    extensions: ['.ts', '.tsx', '.js', '.jsx', '.json'], //Â æŒ‰é¡ºåºè§£æä»¥ä¸Šæ‰©å±•åçš„æ–‡ä»¶(å¿…é¡»æ·»åŠ ï¼Œå¦åˆ™é€šè¿‡importè¿›æ¥çš„æ–‡ä»¶æ— æ³•è§£æã€‚importæ—¶å¯ä¸å†™æ‰©å±•åÂ é»˜è®¤å€¼ä¸ºÂ ['.wasm',Â '.mjs',Â '.js',Â '.json']
  },
  output: {
    filename: 'bundle.js',
    path: path.resolve(__dirname, 'dist'),
  },
  plugins: [
    new CleanWebpackPlugin(),
    new HtmlWebpackPlugin({
      template: 'public/index.html',
      title: 'TypeScript-Webpack-starter',
    }),
    new MiniCssExtractPlugin({
      filename: 'css/[name].css',
      chunkFilename: 'css/[id].css',
    }),
  ],
};

module.exports = (env, argv) => {
  if (argv.mode === 'development') {
    config.devtool = 'source-map'; //Â å¯¼å‡ºSourceMapä¾›è°ƒè¯•
  }

  if (argv.mode === 'production') {
  }
  return config;
};
```

æŸäº›å¼€æºé¡¹ç›®ä¼šåœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª build æ–‡ä»¶å¤¹ï¼Œå°† webpack çš„é…ç½®æ‹†åˆ†ä¸º base(å­˜æ”¾å…¬ç”¨é…ç½®)ã€dev(å¼€å‘ç¯å¢ƒç‰¹æœ‰çš„é…ç½®)ã€prod(ç”Ÿäº§ç¯å¢ƒç‰¹æœ‰çš„é…ç½®)ï¼Œåˆ©ç”¨åˆå¹¶æ’ä»¶å°† dev æˆ– prod å’Œ base åˆå¹¶ã€‚ä¸ªäººè®¤ä¸ºå…¶æ‹†åˆ†çš„æ€æƒ³æ²¡æœ‰é—®é¢˜ï¼Œä½†å¦‚æœé…ç½®é¡¹æ²¡è¾¾åˆ°ä¸€å®šè§„æ¨¡(500 è¡Œä»¥ä¸Š?)å¯ä»¥ä¸ç”¨è¿™ä¹ˆéº»çƒ¦ã€‚å¦‚ä¸Šæ–¹é…ç½®æ‰€ç¤ºï¼šåªä½¿ç”¨ webpack.config.js ï¼Œå…ˆæ·»åŠ å…¬ç”¨é…ç½®(ä¸€ä¸ªå¯¹è±¡)ï¼Œç„¶åé€šè¿‡åˆ¤æ–­å½“å‰æ˜¯å¼€å‘è¿˜æ˜¯ç”Ÿäº§æ¨¡å¼ï¼Œè¡¥å……ç›¸åº”é…ç½®ã€‚

### 6.2.11 æ·»åŠ è„šæœ¬

package.json

```json
Â Â "scripts":Â {
Â Â Â Â "serve":Â "npx webpack serve --mode=development --open",
Â Â Â Â "dev":Â "npx webpack serve --mode=development --open",
Â Â Â Â "build":Â "npx webpack Â --mode production"
Â Â },
```

### 6.2.12 å½¢æˆé¡¹ç›®ç»“æ„

åˆ›å»º libsã€publicã€src æ–‡ä»¶å¤¹

```javascript
â”œâ”€â”€ libs                        // ç¬¬ä¸‰æ–¹åº“
â”œâ”€â”€ public
â”‚ â”œâ”€â”€ index.html
â”œâ”€â”€ src
â”‚ â”œâ”€â”€ assets                    // èµ„æº
â”‚ â”‚ â”œâ”€â”€ imagesÂ                  // å›¾ç‰‡
â”‚ â”‚ â”œâ”€â”€ stylesÂ                  // æ ·å¼æ–‡ä»¶ scssã€lessã€css
â”‚ â””â”€â”€ index.ts
â”œâ”€â”€ .browserslistrc
â”œâ”€â”€ .editorconfig
â”œâ”€â”€ .eslintrc.js
â”œâ”€â”€ .gitignore
â”œâ”€â”€ babel.config.js
â”œâ”€â”€ package.json
â”œâ”€â”€ postcss.config.js
â”œâ”€â”€ README.md
â”œâ”€â”€ tsconfig.json
â””â”€â”€ webpack.config.js

```

å…¶ä¸­ index.html

```html
<!DOCTYPE html>
<html lang="zh-cmn-Hans">
  <head>
    Â Â 
    <meta charset="utf-8" />
    Â Â 
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    Â Â 
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    Â Â 
    <title><%=Â htmlWebpackPlugin.options.titleÂ %></title>
  </head>

  <body>
    Â Â <noscript>
      Â Â Â Â <strong
        >We'reÂ sorryÂ butÂ <%=Â htmlWebpackPlugin.options.titleÂ %>Â doesn'tÂ workÂ properlyÂ withoutÂ JavaScriptÂ enabled.
        Â Â Â Â Â Â PleaseÂ enableÂ itÂ toÂ continue.</strong
      >
      Â Â </noscript
    >
    Â Â 
    <div id="app"></div>
  </body>
</html>
```

### 6.2.13 æºç åœ°å€

[https://github.com/THS-FE/typescript-webpack-starter](https://github.com/THS-FE/typescript-webpack-starter)

# 7 å¤‡æ³¨

## 7.1 ä¸ºä»€ä¹ˆå¥½å¤šé…ç½®æ–‡ä»¶çš„åç¼€æ˜¯ rc

> [Unix: from runcom files on the CTSS system 1962-63, via the startup script /etc/rc] Script file containing startup instructions for an application program (or an entire operating system), usually a text file containing commands of the sort that might have been invoked manually once the system was running but are to be executed automatically each time the system starts up.

rc ä»£è¡¨çŸ­è¯­ runcom ï¼ˆè¿è¡Œå‘½ä»¤ï¼‰ï¼Œunix çš„çˆ·çˆ· CTSS ç³»ç»Ÿä¸­çš„è„šæœ¬æ–‡ä»¶ï¼Œé‡Œè¾¹åŒ…å«äº†åº”ç”¨æˆ–è€…æ•´ä¸ªç³»ç»Ÿå¯åŠ¨æ—¶è¦æ‰§è¡Œçš„å‘½ä»¤ã€‚

ç°åœ¨æ›´é€šç”¨çš„å«ä¹‰å¯èƒ½æ˜¯ runtime configrationï¼Œå³åº”ç”¨è¿è¡Œæ—¶çš„é…ç½®ã€‚

å‚è€ƒï¼š[https://stackoverflow.com/questions/11030552/what-does-rc-mean-in-dot-files](https://stackoverflow.com/questions/11030552/what-does-rc-mean-in-dot-files)

[https://unix.stackexchange.com/questions/3467/what-does-rc-in-bashrc-stand-for](https://unix.stackexchange.com/questions/3467/what-does-rc-in-bashrc-stand-for)
