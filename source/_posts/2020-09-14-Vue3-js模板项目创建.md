---
title: Vue3.js模板项目创建
author: 天下布武
authorLink: https://github.com/zapzqc
excerpt: 本文详细地描述了Vue.js3模板的创建过程
thumbnail: 2020/09/14/Vue3-js模板项目创建/template.jpg
categories:
  - [JS框架, Vue.js3]
tags:
  - Vue.js3
toc: true
date: 2020-09-14 13:22:12
updated: 2020-09-14 13:22:12
---

# 基础环境

- Vue CLI 版本为 4.5.4
- Node.js 版本为 14.9.0 （官方建议是 10 以上版本，最低为 8.9）

通过以下命令行查询对应版本号：

```JavaScript
vue --version      // @vue/cli 4.5.4

node --version     // v14.9.0
```

如发现版本不满足要求，可以分别通过：

- 运行以下命令行，更新 Vue CLI 至最新版本

  ```bash
  npm install -g @vue/cli
  ```

- 前往 [Node.js](https://nodejs.org/en/) 下载最新版本的程序，并安装。

# 项目创建

在想创建项目的目录下运行以下命令行：

```bash
vue create vue3-starter
```

勾选以下几项(单击图片可看大图):
{% asset_img vue3_create1.jpg %}
依次选择如下内容：
{% asset_img vue3_create2.jpg %}
最后会问是否要保存当前这个配置，按自己的意愿选择和命名。

默认会通过以前选择过的包管理工具 yarn 或 NPM 来安装依赖。如果想修改的话，在 windows 命令行中运行:

```bash
C:\Users\user_name\.vuerc  // user_name 替换成你的系统登录名
```

用文本文件打开,到最后部分，修改下面 “packageManager” 中的内容

```javascript
  "latestVersion": "4.5.4",
  "lastChecked": 1599442947441,
  "packageManager": "yarn"  // 或者为NPM
```

创建成功后，运行如下命令行：

```bash
cd vue3-starter
yarn serve
```

# 项目改造

## 默认结构

```javascript
├── public                    // 静态资源 该文件夹下的内容在构建时会直接拷贝到dist文件夹下
│   ├── favicon.ico           // 网站图标
│   └── index.html            // HTML模板页
├── src                       // 主要工作目录
│   ├── assets                // 静态资源 会被webpack打包处理
│   │   └── logo.png
│   ├── components            // 组件(dumb components，获取props，派发事件)
│   │   └── HelloWorld.vue    // 示例组件
│   ├── router                // 路由（统一使用懒加载）
│   │   └── index.ts          // 组装各路由并导出
│   ├── store                 // 状态管理（可选）
│   │   └── index.ts
│   ├── views                 // 页面(smart components，可以访问store，路由，window)
│   │   ├── About.vue         // 关于
│   │   └── Home.vue          // 首页
│   ├── App.vue               // 根组件
│   ├── main.ts               // 入口文件（引入全局的样式和脚本，可安装插件、注册组件或指令等）
│   └── shims-vue.d.ts        // 帮助IDE识别 .vue文件
├── .browserslistrc  // 目标浏览器配置
├── .editorconfig    // 代码风格规范
├── .eslintrc.js     // eslint配置
├── .gitignore       // git提交忽略文件
├── babel.config.js  // babel配置
├── package.json     // 项目依赖、脚本
├── README.md        // 项目命令行说明
└── tsconfig.json    // TypeScript配置文件
```

## 内容改造

1. 在根目录下添加 vue.config.js 文件来扩展 webpack 配置

   ```javascript
   /**
    * 判断是否是生产环境
    * @returns {boolean}
    */
   function isProd() {
     return process.env.NODE_ENV === "production";
   }

   module.exports = {
     publicPath: isProd() ? "./" : "/", // 部署到生产环境时，按需修改前项为项目名称
     productionSourceMap: false, // 不需要生产环境的 source map，减少构建时间

     configureWebpack: (config) => {
       if (isProd()) {
         // 去除 console
         Object.assign(
           config.optimization.minimizer[0].options.terserOptions.compress,
           {
             // eslint-disable-next-line @typescript-eslint/camelcase
             drop_console: true,
           }
         );
       }
     },
   };
   ```

2. 在 src 文件夹下创建 hooks、layouts、plugins、services、utils 文件夹

3. 修改 public 文件夹下的 index.html 中

   ```html
   <!-- <html lang="en"> 改为中文，否则安装了翻译插件的浏览器会弹出是否要翻译本页对话框-->
   <html lang="zh"></html>
   ```

4. 在 assets 文件夹下创建 fonts、icons、images、styles 文件夹，删除 logo.png
5. 删除 components 文件夹下的 HelllWorld.vue，views 文件夹下的 About.vue
6. 按 kebab-case 命名法，修改所有不符合规范的文件和文件夹和对应文件中的引用(App.vue -> app.vue, Home.vue -> home.vue)

```javascript
// home.vue 添加一个通过ref绑定数据的示例
<template>
  <div class="home">
    {{title}}
  </div>
</template>

<script lang="ts">
import { ref, defineComponent } from 'vue';

export default defineComponent({
  name: 'Home',
  setup() {
    const title = ref('首页');
    return {
      title,
    };
  },
});
</script>
```

```javascript
// app.vue
<template>
  <div id="nav">
    <router-link to="/">Home</router-link> |
  </div>
  <router-view/>
</template>

<style lang="scss">

</style>
```

```javascript
// main.ts 部分内容
import App from "./app.vue"; // 之前是App.vue
```

```javascript
// router.ts
import { createRouter, createWebHashHistory, RouteRecordRaw } from "vue-router";
import Home from "../views/home.vue";

const routes: Array<RouteRecordRaw> = [
  {
    path: "/",
    name: "Home",
    component: Home,
  },
];

const router = createRouter({
  history: createWebHashHistory(),
  routes,
});

export default router;
```

7.

## 改造后的结构

```javascript
├── public                    // 静态资源 该文件夹下的内容在构建时会直接拷贝到dist文件夹下
│   ├── favicon.ico           // 网站图标
│   ├── index.html            // HTML模板页
│   └── ...
├── src                       // 主要工作目录
│   ├── assets                // 静态资源 会被webpack打包处理
│   │   ├── fonts             // 字体文件（可选）
│   │   │   └── ...
│   │   ├── icons             // 图标（可选）
│   │   │   └── ...
│   │   ├── images            // 图片（可选）
│   │   │   ├── exception     // exception（通用异常页面）模块使用到的图片 （待添加）
│   │   │   │   └── ...
│   │   │   ├── module-a      // 此处要用模块命名（可选）
│ 	│   │   │   └── ...       // 该模块下使用到的图片
│   │   │   └── ...           // 通用的图片（小项目就不用分文件夹了）
│   │   └── styles            // 样式
│   │       ├── common.scss   // 常用样式（提供通用的）
│   │       ├── global.scss   // 全局样式
│   │       ├── style.scss    // 组装各样式并导出最终被 main.js 引入
│   │       └── ...
│   ├── components            // 组件(dumb components，获取props，派发事件)
│   │   ├── common            // 不同项目中的通用组件（可选）
│   │   │   └── ...
│   │   ├── module-a          // 此处要用模块命名（可选）
│   │   │   └── ...           // 该模块下的组件
│   │   └── ...               // 当前项目中的通用组件
│   ├── hooks                 // 钩子
│   │   ├── common            // 不同项目中的通用hooks
│   │   │   └── ...
│   │   └── ...               // 本项目中通用的hooks
│   ├── layouts               // 布局（可选）
│   │   └── ...
│   ├── plugins               // vue插件（如：Element，vuetify）
│   │   ├── index.ts          // 组装各插件并导出
│   │   └── ...
│   ├── router                // 路由（统一使用懒加载）
│   │   ├── index.ts          // 组装各路由并导出
│   │   └── ...
│   ├── services              // 接口请求
│   │   ├── config.ts         // 常量
│   │   ├── index.ts          // 组装各请求并导出
│   │   └── ...
│   ├── store                 // 状态管理（可选）
│   │   ├── modules           // 各模块
│   │   │   └── ...           // 尽量和views中的模块对应上
│   │   ├── actions.ts        // 根级别的 action
│   │   ├── getters.js        // 根级别的 getter
│   │   ├── index.ts          // 组装模块并导出
│   │   ├── mutation-types.ts // mutation事件类型定义
│   │   └── mutations.ts      // 根级别的 mutation
│   ├── utils                 // 工具类
│   │   ├── config.ts         // 常量
│   │   ├── common.ts         // 常用功能（提供通用的）
│   │   ├── request.ts        // HTTP请求
│   │   ├── validator.ts      // 表单验证
│   │   └── ...
│   ├── views                 // 页面(smart components，可以访问store，路由，window)
│   │   ├── exception         // 通用异常展示页面   （待添加）
│   │   │   ├── NotFound.vue     // 404页面
│   │   │   └── Unauthorized.vue // 401页面
│   │   ├── module-a.vue      // 用模块命名,如该模块下页面较多，可建以模块为名称的文件夹，在其中创建多个页面
│   │   │   └── ...
│   │   └── ...
│   ├── app.vue        // 根组件
│   ├── main.ts        // 入口文件（引入全局的样式和脚本，可安装插件、注册组件或指令等）
│   └── shims-vue.d.ts // 帮助IDE识别 .vue文件
├── .browserslistrc  // 目标浏览器配置
├── .editorconfig    // 代码风格规范
├── .eslintrc.js     // eslint配置
├── .gitignore       // git提交忽略文件
├── babel.config.js  // babel配置
├── package.json     // 项目依赖、脚本
├── README.md        // 项目命令行说明
├── tsconfig.json    // TypeScript配置文件
└── vue.config.js    // 自定义webpack配置
```
